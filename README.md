# Game-AwakenedShadows

一款在战斗、场景、UI等个个方面符合基本RPG类型的横版类恶魔城游戏。作者已经很尽力的在cos类银河恶魔城游戏的玩法啦(•̅灬•̅ )。
游戏总共分为六个场景，五个关卡，三个Boss。初始玩家位于一个较为安全的平原场景。随着探索的不断深入，在关卡中遇到的敌人的强度也会迅速增长。

## 初始按键设置

### 基础部分

- **A** 和 **D**：控制玩家左右移动的基础键
- **J**：控制玩家攻击的基础键
- **K**：控制玩家跳跃的基础键
- **S**：控制完成蹲下的基础键

### 技能部分

- **1**：药水使用基础键
- **L**：冲刺类技能基础键
- **U**：丢剑类技能基础键
- **E**：水晶类技能基础键
- **N**：防反类技能基础键
- **R**：黑洞（大招）技能基础键

**Tips**：冲刺时，按下**蹲下键**进入**滑铲**

### UI部分

- **C**：角色面板以及装备管理面板的控制键
- **V**：装备制作以及材料查看管理面板的控制键
- **B**：技能加点以及管理的控制键
- **X**：游戏内设置（音量、按键重新绑定等）的控制键
- **Z**：敌人图鉴的控制键

## 游戏开发简述

游戏本体采用的是Unity引擎进行开发，设计模式主要采用的是状态机模式以及单例模式。部分模块进行了一定的解耦合，如**Boss血条显示**、**按键绑定**、**存档管理**等，
但仍然有些模块，是不能单独拿出来运行的，最典型的便是**技能**模块。技能模块本应该是单独作为一个组件，且有一个单独的实体控制类的，但是由于本游戏开发初期，作者是跟着
教程做的，当时那个教程没有采用相关的设计模式，导致后期也没有办法进行修改。

实际上，游戏开发的初期，作者就是一边看教程一边做，那个时候感觉自己有一点思维，或者说是Good Idea，但是受限于能力无法施展。到游戏开发后期，也就是作者已经基本掌握脚本的编写，且对于Unity中组件的生命周期有一定的熟悉程度后，才开始慢慢地实现自己的想法，如**跨场景关卡**、**别样的Boss**、**敌人图鉴**等。

讲真的，游戏开发的过程既充满快乐，又充满挑战。还记得一开始着手这款游戏的时候，我当时心中已经有一个RPG游戏的雏形了。我想把我喜欢的游戏里面的敌人与角色放进我所创造的游戏中，让那些熟悉的**老朋友**，在另外一个**时空**中再一次地与我相遇，再一次地接受我的挑战！现在，我的游戏已经完工，如果要问我，现在的游戏与当时自己的期望有哪些不同，我的答案是————**没什么不同，只不过那个少年，那个不到完美不愿放弃的少年，那个想用游戏为大家带来快乐的少年，脸上多了一丝的疲倦...**

## 游戏模块简述

游戏总体由好几个模块，万行代码构成。由于当时没有边写代码边写文档的习惯，导致现在，想一一详细列举所有模块已经是天方夜谭。此处我们简单概括每个模块的具体功能。

### 实体模块

实体模块包含玩家模块以及敌人模块。此模块的主要设计模式是**状态机模式**，主要功能就是管理玩家和敌人的**状态转换**，同时也管理着**碰撞检测**。根据每一个实体的类别，会逐步设计对印的局部变量以及功能，但大体上的功能是一样的。

此外，实体类所在的组件拥有一些固定子组件。在创建新的实体时，应当参考一些典型的实体（如骷髅）来进行设计。

### 实体状态模块

此模块主要还是负责实体的数值部分，也就是说**最大生命值**、**攻击力**等战斗相关的数值都由此模块负责。当然**死亡**、**复活**等也是由此模块负责，在相印的阶段，其会调用实体的死亡和复活的函数来管理其生命周期。此外，此模块还负责**元素**相关的附着以及伤害机制。

### NPC模块

NPC模块中主要是负责NPC的行为逻辑。他们本身没有血量等基本状态，无法被攻击，主要是服务于交互，即对话。NPC分为**可以移动的**以及**不可以移动的**两种，其中动物NPC属于可移动NPC的拓展。

### 物品模块

物品模块主要还是使用的是**可序列化**物品的脚本进行设计的。对于物品来说，将被分为**装备**以及**材料**两种。其中装备有独特的属性加成，在玩家使用时将为玩家提供一定的属性加成。

此外，物品模块中还包含了物品掉落相关的功能。在实体上装配此模块，在特定时候调用此模块的触发函数，将实现物品掉落的功能（宝箱的物品掉落也是由此诞生）。

最后，其实特殊效果也是此模块的内容。因为特殊效果服务于装备或者材料，所以就索性把他们也放在一起。游戏中的特殊效果比较少，其实特殊效果的设计也是比较消耗精力的一件事。

### 背包模块

背包模块涉及的数据结构是哈希表以及数组。我们通过哈希表来进行对特定装备的快速查找，同时我们将插槽与装备列表分离，在每一次更新时对插槽内的物品信息进行更新，使得物品连续排序。

### 游戏存档模块

游戏游玩进度的存储使用的是Json文件实现的，所有存档都存储在该操作系统的持久化路径中。游戏存档最大上限是六个，还有一个是临时存档，用于将其他存档的数据读入，然后在此存档中加载游戏。这样做主要还是服务于**多存档功能**的，因为游戏初期并没有考虑多存档的事，后期基于**少改动**的原则，我们便如此设计。

此外，游戏也是实现了跨场景加载的功能，使得游戏的内容拓展难度大大降低，同时也减轻了游戏运行时，对CPU等硬件的负担。

### 技能模块

正如前文所说的，此模块没有解耦合，对于玩家模块的依赖严重。就目前而言是够用的，即我们不需要去设计其他可操控角色，但是在长久来看是不妥当的。

此外技能模块均放置在SkillManager组件中，相关技能参数可以在该组件中设置。

### UI模块

此模块涵盖至少五个子模块，是游戏中一个比较核心的部分。所有游戏信息的展示均通过UI来传达给玩家，以下是各个子模块的概述：

#### 角色面板模块

- 管理玩家状态信息的显示，如当前攻击力、最大生命值等。
- 也是玩家穿戴装备时的窗口。

#### 物品制造模块

- 管理玩家制作物品的方式。
- 玩家提供开发者提供的配方，制作目标装备。
- 可以查看当前玩家材料库的相关信息。

#### 技能加点模块

- 管理玩家的技能学习功能，如学习技能、重置技能等。

#### 敌人图鉴模块

- 玩家可以查看已经解锁的敌人信息。
- 根据敌人的描述来制定相应的战斗方案。

#### 游戏设置模块

- 玩家可以管理游戏中的SFX音量大小和BGM音量大小。
- 可以选择显示或者不显示游戏中玩家头顶的血条等。
- 最重要的是玩家可以在此模块中重新制定适合自己的按键绑定。

#### 游戏内模块

- 显示玩家的血条、灵魂等基本信息。
- 展示技能的冷却进度、Boss血条等其他战斗信息。